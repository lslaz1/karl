<div xmlns="http://www.w3.org/1999/xhtml" xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal">

      <div class="cal_search_header" metal:define-macro="search"
        tal:condition="python: calendar_format_class == 'karl-calendar-wide'">
        <form class="form-group" action="${api.community_info.url}calendar_searchresults.html">
          <fieldset>
            <input class="form-control" type="text" name="body"/>
            <button class="btn btn-default btn-sm" type="submit">Search</button>
          </fieldset>
        </form>
        <h1>${calendar_object.title}</h1>
      </div>


      <div class="container-fluid">    
        <div class="cal_header" metal:define-macro="header">
          <div class="cal_calendars clearafter" >
            <div class="row">
              <!-- Select Layer -->
              <div class="col-lg-5">
                <div class="form-inline"> 
                  <label>
                    Layer:
                  </label>
                    <select class="form-control input-sm">
                      <option
                              tal:attributes="value api.request.path_url + '?filter=';
                                              class 'group'"
                              >All layers</option>
                      <option
                              tal:repeat="layer layers"
                              tal:attributes="value api.request.path_url + '?filter=' + layer.__name__;
                                              class 'color cal_' + layer.color.strip();
                                              selected layer.__name__ == selected_layer"
                              >${layer.title}</option>
                    </select>
                    <tal:block condition="setup_url">
                      (<a href="${setup_url}">Setup</a>)
                    </tal:block>
                  </div>
              </div>
            
              <!-- new event -->
              <div class="col-lg-2 pull-right">   
                <div class="cal_new_event" tal:condition="may_create"> 
                  <a class="btn btn-default btn-xs" href="${calendar.add_event_url}"><span>Add Event</span></a>
                </div>
              </div>
                <div class="cal_new_event" tal:condition="not may_create and mailto_create_event_href">
                  <a class="btn btn-default btn-xs" href="${mailto_create_event_href}"><span>Need to Add an Event?</span></a>
                </div>
              </div><br/>

              <div class="row">
                <!-- buttons -->
                <div class="col-lg-12">
                  <div class="cal-buttonbar clearafter"></div>
                </div>
              </div>

        </div>
      </div>

      <div class="cal_footer clearafter" metal:define-macro="footer">

        

        <!-- actions --> 
        <div class="button-group pull-right">
           <!-- <a class="cal_download" href="#">Download</a> -->
           <a aria-label="Subscribe" href="${calendar.feed_url}" style="padding:10px 5px;">Subscribe</a>
           <a aria-label="Print" href="#"><span class="glyphicon glyphicon-print" style="padding:10px 5px;"></span></a>
        </div>
      </div>

</div>

