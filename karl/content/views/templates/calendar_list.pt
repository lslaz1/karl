<div xmlns="http://www.w3.org/1999/xhtml" xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  metal:use-macro="getattr(api, calendar_layout_template)">


  <span metal:fill-slot="extra-headers" tal:omit-tag="">
    <link rel="alternate" type="application/atom+xml" 
	  title="${calendar.title}" href="${calendar.feed_url}"
	  />
  </span>

  <div metal:fill-slot="content" class="${calendar_format_class}">

    <div metal:use-macro="calendar.navigation.macros['search']"/>

    <div metal:use-macro="calendar.navigation.macros['header']"/>

    <h3 class="cal_title">${calendar.title}</h3>        

    <script language="javascript" type="text/javascript">
        //<![CDATA[
        $(document).ready(function(){
            
            $("#calgridlist").DataTable({
              dom: 'fBrtip',
              paging: true,
              lengthChange: false,
              responsive: true,
              scrollY: 100,
              deferRender: true,
              scroller: true,
              searching: true,
              buttons: [
                    'print'
              ]
            });
        });
        //]]>
      </script>

    <table id="calgridlist" class="table table-striped">
      <thead>
        <th>Date</th>
        <th>Time</th>
        <th>Event</th>
        <th>Location</th>
      </thead>      
      <tbody>
      <tr tal:repeat="event calendar.events" 
          tal:attributes="class python:'cal_agenda_day ' + ('shade', '')[bool(repeat['event'].odd())]">
        
        <th>
          <tal:block condition="event.first_line_day">
            <a class="globalize-calendar-list" href="${event.start_day_url}">${event.first_line_day}</a>
          </tal:block>
          <br/> 
          <tal:block condition="event.second_line_day">
            <a class="globalize-calendar-list" href="${event.end_day_url}">${event.second_line_day}</a>
          </tal:block>
        </th>
        
        <td class="cal_agenda_time">
          ${event.first_line_time}
          <br/>
          ${event.second_line_time}
        </td>
             
        <td class="cal_agenda_block">
          <div class="clearafter">
            <div class="cal_agenda_title">
              <a href="${event.show_url}" class="cal_${event.color}">${event.title}</a>
            </div>
            
            <tal:block condition="event.layer">
              <div class="cal_event_pos_full cal_event_category">
                <a href="${event.show_url}" class="cal_${event.color}">${event.layer}</a>
              </div>                             
            </tal:block>
          </div>
        </td>
        <td>
            <tal:block condition="event.location">
              <div class="cal_agenda_loc">
              &nbsp; ${event.location} </div>
            </tal:block>              
        </td>
      </tr>      
    </tbody>
    </table>

    <div metal:use-macro="calendar.navigation.macros['footer']"/>

  </div>


</div>
