<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal">

  <head>
    <metal:resources use-macro="api.snippets.macros['misc_headers']"/>
    <metal:resources use-macro="api.snippets.macros['css_resources']"/>
    <metal:resources use-macro="api.snippets.macros['js_resources']"/>
    <span metal:define-slot="extra-headers" tal:omit-tag=""/>
    <meta id="karl-home-url" content="${api.home_url}"/>
  </head>

  <body class="generic-layout" tal:attributes="api.body_attriubtes">
    <div class="container-fluid">

      <div tal:replace="structure python: api.render_header()" />

<!-- Main Admin Section -->      
        <div class="container-fluid" id="main">
          <div class="row">

            <div class="col col-lg-9">
              <div id="center" class="clearafter">
                <div metal:define-slot="content"> Content goes here. </div>
              </div>
            </div>
            <!-- <div class="container-fluid">
              <ul class="nav navbar-nav hidden-lg">
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Sidebar (name????)<span class="caret pull-right"></span></a>
                  <ul class="dropdown-menu" role="menu">
                    <li role="navigation" align="center" tal:content="structure api.render_sidebar()" />
                  </ul>
                </li>
              </ul>
            </div> -->

            <div class="col col-lg-3 col-md-4 col-md-offset-4 col-sm-6 col-sm-offset-3">
              <div class="rightcol"
                   tal:define="my_communities my_communities|();
                               tags tags|();">

                  <metal:portlets define-slot="portlets"></metal:portlets>

                  <div class="panel panel-default rightcol" align="center"
                       tal:condition="tags">
                      <h3 tal:condition="my_communities is None">${profile.firstname}'s Tags</h3>
                      <h3 tal:condition="my_communities is not None">My Tags</h3>
                      <div class="portlet-item" tal:condition="not tags">
                        <strong>No tags</strong>
                      </div>
                      <div class="portlet-item" tal:repeat="tag tags">
                       ${tag.count}&nbsp;
                       <a href="${api.here_url}showtag/${tag.name}">${tag.name}</a>
                      </div>
                      <div class="portlet-item">
                       <a href="${api.here_url}taglisting.html"
                       >All ${profile.firstname}'s tags</a>
                      </div>
                    </div>

                    <div tal:condition="my_communities and my_communities is not None"
                         metal:use-macro="api.snippets.macros['my_communities_portlet']"/>

                    <div metal:define-macro="my_communities_portlet"
                         tal:condition="my_communities is None" id="my-communities-portlet">
                      <div class="panel panel-default rightcol" align="center">
                        <h3>${profile.firstname}'s Communities</h3>
                        <div class="portlet-item" tal:condition="communities"
                             tal:repeat="community communities">
                          <strong tal:omit-tag="not community.moderator">
                            <a href="${community.url}">
                              ${community.title}
                            </a>
                          </strong>
                        </div>
                        <div class="portlet-item" tal:condition="not communities">
                          <strong>No Communities</strong>
                        </div>
                      </div>  
                    </div>
              </div> <!-- /.rightcol -->
            </div> <!-- /.col col-lg-3 -->


            <div class="visualClear"><!-- --></div>
          </div> <!-- /.row -->
        </div> <!-- #main -->
      <tal:footer content="structure api.render_footer()" />

    </div>
    <metal:resources use-macro="api.snippets.macros['analytics']"/>
  </body>
</html>
